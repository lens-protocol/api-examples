#import "../../common/graphql/common.graphql"
#import "../../module/graphql/reference-module-fields.graphql"
#import "./metadata-fields.graphql"

fragment PrimaryPublicationId on PrimaryPublication {
  ... on Comment {
    id
  }

  ... on Quote {
    id
  }

  ... on Post {
    id
  }
}

fragment PublicationOperationFields on PublicationOperations {
  id
  isNotInterested
  hasBookmarked
  hasReported
  canAct
  hasActed {
    value
    isFinalisedOnchain
  }
  actedOn {
    ... on KnownCollectOpenActionResult {
      type
    }
    ... on UnknownOpenActionResult {
      address
      category
      initReturnData
    }
  }
  hasReacted
  canComment
  canMirror
  hasMirrored
  canDecrypt {
    result
    reasons
    extraDetails
  }
}

fragment PostFields on Post {
  id
  publishedOn {
    id
  }
  isHidden
  isEncrypted
  momoka {
    proof
  }
  txHash
  createdAt
  by {
    id
    handle
  }
  stats {
    comments
    mirrors
    quotes
  }
  operations {
    ...PublicationOperationFields
  }
  metadata {
    ... on PublicationMetadataV1 {
      ...MetadataV1Fields
    }

    ... on PublicationMetadataV2 {
      ...MetadataV2Fields
    }
  }
  referenceModule {
    ...ReferenceModuleFields
  }
}

fragment QuoteFields on Quote {
  id
  publishedOn {
    id
  }
  isHidden
  isEncrypted
  momoka {
    proof
  }
  txHash
  createdAt
  by {
    id
    handle
  }
  stats {
    comments
    mirrors
    quotes
  }
  operations {
    ...PublicationOperationFields
  }

  quotedOn {
    ...PrimaryPublicationId
  }
  metadata {
    ... on PublicationMetadataV1 {
      ...MetadataV1Fields
    }

    ... on PublicationMetadataV2 {
      ...MetadataV2Fields
    }
  }
  referenceModule {
    ...ReferenceModuleFields
  }
}

fragment MirrorFields on Mirror {
  id
  publishedOn {
    id
  }
  isHidden
  isEncrypted
  momoka {
    proof
  }
  txHash
  createdAt
  mirrorOf {
    ...PrimaryPublicationId
  }
}

fragment CommentFields on Comment {
  id
  publishedOn {
    id
  }
  isHidden
  isEncrypted
  momoka {
    proof
  }
  txHash
  createdAt
  by {
    id
    handle
  }
  stats {
    comments
    mirrors
    quotes
  }
  operations {
    ...PublicationOperationFields
  }
  metadata {
    ... on PublicationMetadataV1 {
      ...MetadataV1Fields
    }

    ... on PublicationMetadataV2 {
      ...MetadataV2Fields
    }
  }
  root {
    ...PrimaryPublicationId
  }
  commentOn {
    ...PrimaryPublicationId
  }

  firstComment {
    ...PrimaryPublicationId
  }

  referenceModule {
    ...ReferenceModuleFields
  }
}
